From f3c33d3d0de018feaa674fae289808530e4353aa Mon Sep 17 00:00:00 2001
From: Rechi <Rechi@users.noreply.github.com>
Date: Fri, 1 Feb 2019 12:30:51 +0100
Subject: [PATCH] [TexturePacker] update windows dirent implementation

---
 tools/depends/native/TexturePacker/src/Win32/dirent.c | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

diff --git a/tools/depends/native/TexturePacker/src/Win32/dirent.c b/tools/depends/native/TexturePacker/src/Win32/dirent.c
index 7b38291c6f37..9d00cf004178 100644
--- a/tools/depends/native/TexturePacker/src/Win32/dirent.c
+++ b/tools/depends/native/TexturePacker/src/Win32/dirent.c
@@ -3,7 +3,7 @@
     Implementation of POSIX directory browsing functions and types for Win32.
 
     Author:  Kevlin Henney (kevlin@acm.org, kevlin@curbralan.com)
-    History: Created March 1997. Updated June 2003.
+    History: Created March 1997. Updated June 2003 and July 2012.
 
     Copyright Kevlin Henney, 1997, 2003. All rights reserved.
 
@@ -28,9 +28,11 @@ extern "C"
 {
 #endif
 
+typedef ptrdiff_t handle_type; /* C99's intptr_t not sufficiently portable */
+
 struct DIR
 {
-    long                handle; /* -1 for failed rewind */
+    handle_type         handle; /* -1 for failed rewind */
     struct _finddata_t  info;
     struct dirent       result; /* d_name null iff first time */
     char                *name;  /* null-terminated char string */
@@ -51,7 +53,7 @@ DIR *opendir(const char *name)
         {
             strcat(strcpy(dir->name, name), all);
 
-            if((dir->handle = (long) _findfirst(dir->name, &dir->info)) != -1)
+            if ((dir->handle = (handle_type)_findfirst(dir->name, &dir->info)) != -1)
             {
                 dir->result.d_name = 0;
                 dir->result.d_type = 0;
@@ -127,7 +129,7 @@ void rewinddir(DIR *dir)
     if(dir && dir->handle != -1)
     {
         _findclose(dir->handle);
-        dir->handle = (long) _findfirst(dir->name, &dir->info);
+        dir->handle = (handle_type)_findfirst(dir->name, &dir->info);
         dir->result.d_name = 0;
         dir->result.d_type = 0;
     }
