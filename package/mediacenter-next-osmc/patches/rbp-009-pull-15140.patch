From 5ad58c971ef983e66ae2bf18a2f73f948c16b928 Mon Sep 17 00:00:00 2001
From: wsnipex <wsnipex@a1.net>
Date: Thu, 27 Dec 2018 09:49:25 +0100
Subject: [PATCH] fix CID 1441972

return a string instead of a dangling pointer
---
 xbmc/CompileInfo.cpp.in | 6 +++---
 xbmc/CompileInfo.h      | 4 +++-
 2 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/xbmc/CompileInfo.cpp.in b/xbmc/CompileInfo.cpp.in
index 7e4d884ef8d2..c47e6cc594dc 100644
--- a/xbmc/CompileInfo.cpp.in
+++ b/xbmc/CompileInfo.cpp.in
@@ -8,9 +8,9 @@
 
 #include "CompileInfo.h"
 
+#include <algorithm>
 #include <cstddef>
 #include <string>
-#include <algorithm>
 
 
 int CCompileInfo::GetMajor()
@@ -60,13 +60,13 @@ const char* CCompileInfo::GetCopyrightYears()
   return "@APP_COPYRIGHT_YEARS@";
 }
 
-const char* CCompileInfo::GetBuildDate()
+std::string CCompileInfo::GetBuildDate()
 {
   const std::string bdate = "@APP_BUILD_DATE@";
   if (!bdate.empty())
   {
     std::string datestamp = bdate.substr(0, 4) + "-" + bdate.substr(4, 2) + "-" + bdate.substr(6, 2);
-    return datestamp.c_str();
+    return datestamp;
   }
   return "1970-01-01";
 }
diff --git a/xbmc/CompileInfo.h b/xbmc/CompileInfo.h
index c92d24083a43..db3cfbe0f284 100644
--- a/xbmc/CompileInfo.h
+++ b/xbmc/CompileInfo.h
@@ -8,6 +8,8 @@
 
 #pragma once
 
+#include <string>
+
 class CCompileInfo
 {
 public:
@@ -19,5 +21,5 @@ class CCompileInfo
   static const char *GetSuffix();  // Git "Tag", e.g. alpha1
   static const char* GetSCMID();   // Git Revision
   static const char* GetCopyrightYears();
-  static const char* GetBuildDate();
+  static std::string GetBuildDate();
 };
