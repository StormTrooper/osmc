From 80edbeca32c3489b87e1ec4354e24be17be48582 Mon Sep 17 00:00:00 2001
From: Greg McCarthy <greg@gjmccarthy.co.uk>
Date: Fri, 30 Dec 2016 19:38:47 +0000
Subject: [PATCH] Ensure that Kodi is not built against any X libraries

---
 tools/depends/target/ffmpeg/CMakeLists.txt | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/tools/depends/target/ffmpeg/CMakeLists.txt b/tools/depends/target/ffmpeg/CMakeLists.txt
index 9ad9000..851c154 100644
--- a/tools/depends/target/ffmpeg/CMakeLists.txt
+++ b/tools/depends/target/ffmpeg/CMakeLists.txt
@@ -16,7 +16,7 @@ if(CROSSCOMPILING)
 endif()
 
 if(CORE_SYSTEM_NAME STREQUAL linux OR CORE_SYSTEM_NAME STREQUAL freebsd)
-  list(APPEND ffmpeg_conf --enable-vdpau --enable-vaapi --enable-pic)
+  list(APPEND ffmpeg_conf --disable-vdpau --disable-vaapi --enable-pic)
 elseif(CORE_SYSTEM_NAME STREQUAL android)
   if(CPU MATCHES arm64)
     list(APPEND ffmpeg_conf --cpu=cortex-a53 --arch=aarch64)
@@ -58,6 +58,14 @@ externalproject_add(ffmpeg
                       --extra-version="kodi-${FFMPEG_VER}"
                       --disable-devices
                       --disable-doc
+		      --disable-vaapi 
+		      --disable-vdpau \
+		      --disable-libxcb 
+		      --disable-libxcb-shape 
+		      --disable-libxcb-shm 
+		      --disable-libxcb-xfixes 
+		      --disable-x11grab 
+		      --disable-xlib 
                       --disable-ffplay
                       --disable-ffmpeg
                       --disable-ffprobe
-- 
2.1.4

