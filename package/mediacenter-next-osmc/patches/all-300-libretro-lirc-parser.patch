From 1c220a19cdfa821decc604d2885c48430b8e8f58 Mon Sep 17 00:00:00 2001
From: Greg McCarthy <greg@gjmccarthy.co.uk>
Date: Fri, 1 Jun 2018 18:00:53 +0100
Subject: [PATCH] Test

---
 xbmc/AppParamParser.cpp | 17 +++++++++++++++++
 xbmc/AppParamParser.h   |  4 ++++
 2 files changed, 21 insertions(+)

diff --git a/xbmc/AppParamParser.cpp b/xbmc/AppParamParser.cpp
index 3729d39729..896337dfca 100644
--- a/xbmc/AppParamParser.cpp
+++ b/xbmc/AppParamParser.cpp
@@ -25,6 +25,7 @@
 #include "utils/log.h"
 #include "utils/SystemInfo.h"
 #include "utils/StringUtils.h"
+#include "input/InputManager.h"
 #ifdef TARGET_WINDOWS
 #include "WIN32Util.h"
 #endif
@@ -46,6 +47,22 @@ void CAppParamParser::Parse(const char* const* argv, int nArgs)
     for (int i = 1; i < nArgs; i++)
     {
       ParseArg(argv[i]);
+      if (strnicmp(argv[i], "-l", 2) == 0 || strnicmp(argv[i], "--lircdev", 9) == 0)
+      {
+        // check the next arg with the proper value.
+        int next = i + 1;
+        if (next < nArgs)
+        {
+          if ((argv[next][0] != '-') && (argv[next][0] == '/'))
+          {
+            m_remoteControlName = argv[next];
+            i++;
+          }
+        }
+      }
+      else if (strnicmp(argv[i], "-n", 2) == 0 || strnicmp(argv[i], "--nolirc", 8) == 0)
+        m_remoteControlEnabled = false;
+
      if (stricmp(argv[i], "-d") == 0)                                                                                                                             
      {                                                                                                                                                            
        if (i + 1 < nArgs)                                                                                                                                         
 
diff --git a/xbmc/AppParamParser.h b/xbmc/AppParamParser.h
index df06e45d9b..45150eb3de 100644
--- a/xbmc/AppParamParser.h
+++ b/xbmc/AppParamParser.h
@@ -27,6 +27,8 @@ class CAppParamParser
     void Parse(const char* const* argv, int nArgs);
 
     const CFileItemList &Playlist() const { return m_playlist; }
+    bool RemoteControlEnabled() const { return m_remoteControlEnabled; }
+    const std::string &RemoteControlName() const { return m_remoteControlName; }
 
   private:
     bool m_testmode;
@@ -36,4 +38,6 @@ class CAppParamParser
     void EnableDebugMode();
 
     CFileItemList m_playlist;
+    bool m_remoteControlEnabled = true;
+    std::string m_remoteControlName;
 };
-- 
2.12.3

