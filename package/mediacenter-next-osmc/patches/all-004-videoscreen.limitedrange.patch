From 00a771d3a9b4270f5982faeb8dcf48e0ad5bc7df Mon Sep 17 00:00:00 2001
From: Lukas Rusak <lorusak@gmail.com>
Date: Sat, 21 Apr 2018 11:07:11 -0700
Subject: [PATCH] settings: set visible to false for videoscreen.limitedrange
 on other GLES platforms

---
 cmake/platform/linux/aml.cmake |  2 +-
 system/settings/amlogic.xml    | 12 ++++++++++++
 system/settings/android.xml    |  3 +++
 system/settings/rbp.xml        |  3 +++
 system/settings/rbp2.xml       |  3 +++
 5 files changed, 22 insertions(+), 1 deletion(-)
 create mode 100644 system/settings/amlogic.xml

diff --git a/cmake/platform/linux/aml.cmake b/cmake/platform/linux/aml.cmake
index 82e242b06a19..5100cfc53d37 100644
--- a/cmake/platform/linux/aml.cmake
+++ b/cmake/platform/linux/aml.cmake
@@ -1,3 +1,3 @@
 set(PLATFORM_REQUIRED_DEPS OpenGLES AML EGL)
 set(APP_RENDER_SYSTEM gles)
-list(APPEND PLATFORM_DEFINES -DMESA_EGL_NO_X11_HEADERS)
+list(APPEND PLATFORM_DEFINES -DMESA_EGL_NO_X11_HEADERS -DPLATFORM_SETTINGS_FILE=amlogic.xml)
diff --git a/system/settings/amlogic.xml b/system/settings/amlogic.xml
new file mode 100644
index 000000000000..d2b0d5ccf287
--- /dev/null
+++ b/system/settings/amlogic.xml
@@ -0,0 +1,12 @@
+<?xml version="1.0" encoding="utf-8" ?>
+<settings version="1">
+  <section id="system">
+    <category id="display">
+      <group id="1">
+        <setting id="videoscreen.limitedrange" type="boolean" label="36042" help="36359">
+          <visible>false</visible>
+        </setting>
+      </group>
+    </category>
+  </section>
+</settings>
diff --git a/system/settings/android.xml b/system/settings/android.xml
index 53d2c1065099..401563d4f5d0 100644
--- a/system/settings/android.xml
+++ b/system/settings/android.xml
@@ -26,6 +26,9 @@
         <control type="spinner" format="string" />
         <control type="edit" format="integer" />
         </setting>
+        <setting id="videoscreen.limitedrange" type="boolean" label="36042" help="36359">
+          <visible>false</visible>
+        </setting>
       </group>
     </category>
   </section>
diff --git a/system/settings/rbp.xml b/system/settings/rbp.xml
index 7337d13f4cd5..0044e48c9fa2 100644
--- a/system/settings/rbp.xml
+++ b/system/settings/rbp.xml
@@ -78,6 +78,9 @@
           <control type="spinner" format="string" />
           <control type="edit" format="integer" />
         </setting>
+        <setting id="videoscreen.limitedrange" type="boolean" label="36042" help="36359">
+          <visible>false</visible>
+        </setting>
       </group>
       <group id="2">
         <setting id="videoscreen.framepacking" type="boolean" label="38029" help="38030">
diff --git a/system/settings/rbp2.xml b/system/settings/rbp2.xml
index 15b98bd07c7b..5d457387acfd 100644
--- a/system/settings/rbp2.xml
+++ b/system/settings/rbp2.xml
@@ -15,6 +15,9 @@
         <setting id="videoscreen.textures32">
           <default>true</default>
         </setting>
+        <setting id="videoscreen.limitedrange" type="boolean" label="36042" help="36359">
+          <visible>false</visible>
+        </setting>
       </group>
     </category>
     <category id="audio">
