From dc7d8e662d77cbd1ff1829f7e43cb7868e586a9c Mon Sep 17 00:00:00 2001
From: Rainer Hochecker <fernetmenta@online.de>
Date: Fri, 4 May 2018 10:58:41 +0200
Subject: [PATCH] limit visibility of CGetDirectoryItems to local file

---
 xbmc/dialogs/GUIDialogSimpleMenu.cpp  | 4 ++++
 xbmc/windows/GUIMediaWindow.cpp       | 3 +++
 xbmc/windows/GUIWindowFileManager.cpp | 3 +++
 3 files changed, 10 insertions(+)

diff --git a/xbmc/dialogs/GUIDialogSimpleMenu.cpp b/xbmc/dialogs/GUIDialogSimpleMenu.cpp
index 32bc34690a57..2fc2e3e3334d 100644
--- a/xbmc/dialogs/GUIDialogSimpleMenu.cpp
+++ b/xbmc/dialogs/GUIDialogSimpleMenu.cpp
@@ -36,6 +36,8 @@
 #include "URL.h"
 #include "utils/Variant.h"
 
+namespace
+{
 class CGetDirectoryItems : public IRunnable
 {
 public:
@@ -53,6 +55,8 @@ class CGetDirectoryItems : public IRunnable
   CFileItemList &m_items;
   XFILE::CDirectory::CHints m_hints;
 };
+}
+
 
 bool CGUIDialogSimpleMenu::ShowPlaySelection(CFileItem& item)
 {
diff --git a/xbmc/windows/GUIMediaWindow.cpp b/xbmc/windows/GUIMediaWindow.cpp
index d6b3107f42e6..94348aedf024 100644
--- a/xbmc/windows/GUIMediaWindow.cpp
+++ b/xbmc/windows/GUIMediaWindow.cpp
@@ -87,6 +87,8 @@
 using namespace ADDON;
 using namespace KODI::MESSAGING;
 
+namespace
+{
 class CGetDirectoryItems : public IRunnable
 {
 public:
@@ -105,6 +107,7 @@ class CGetDirectoryItems : public IRunnable
   CFileItemList &m_items;
   bool m_useDir;
 };
+}
 
 CGUIMediaWindow::CGUIMediaWindow(int id, const char *xmlFile)
     : CGUIWindow(id, xmlFile)
diff --git a/xbmc/windows/GUIWindowFileManager.cpp b/xbmc/windows/GUIWindowFileManager.cpp
index 976dae3191f6..a1f3d21d6851 100644
--- a/xbmc/windows/GUIWindowFileManager.cpp
+++ b/xbmc/windows/GUIWindowFileManager.cpp
@@ -94,6 +94,8 @@ using namespace KODI::MESSAGING;
 #define CONTROL_CURRENTDIRLABEL_LEFT    101
 #define CONTROL_CURRENTDIRLABEL_RIGHT   102
 
+namespace
+{
 class CGetDirectoryItems : public IRunnable
 {
 public:
@@ -111,6 +113,7 @@ class CGetDirectoryItems : public IRunnable
   CURL m_url;
   CFileItemList &m_items;
 };
+}
 
 CGUIWindowFileManager::CGUIWindowFileManager(void)
     : CGUIWindow(WINDOW_FILES, "FileManager.xml"),
