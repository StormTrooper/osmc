From a83e50f05afdf3722b69375198a1a772f7d54012 Mon Sep 17 00:00:00 2001
From: Unknown <gelotus@gmail.com>
Date: Tue, 1 May 2018 17:18:49 +0200
Subject: [PATCH] [aml]Register lirc in AML after #13761

---
 xbmc/windowing/amlogic/WinSystemAmlogic.cpp | 1 +
 xbmc/windowing/amlogic/WinSystemAmlogic.h   | 3 ++-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/xbmc/windowing/amlogic/WinSystemAmlogic.cpp b/xbmc/windowing/amlogic/WinSystemAmlogic.cpp
index 7683ea76e172..324d47ffd7a1 100644
--- a/xbmc/windowing/amlogic/WinSystemAmlogic.cpp
+++ b/xbmc/windowing/amlogic/WinSystemAmlogic.cpp
@@ -79,6 +79,7 @@ CWinSystemAmlogic::CWinSystemAmlogic() :
   AE::CAESinkFactory::ClearSinks();
   CAESinkALSA::Register();
   CLinuxPowerSyscall::Register();
+  m_lirc.reset(OPTIONALS::LircRegister());
   m_libinput->Start();
 }
 
diff --git a/xbmc/windowing/amlogic/WinSystemAmlogic.h b/xbmc/windowing/amlogic/WinSystemAmlogic.h
index 8e0bbe454787..d7314c0d4011 100644
--- a/xbmc/windowing/amlogic/WinSystemAmlogic.h
+++ b/xbmc/windowing/amlogic/WinSystemAmlogic.h
@@ -21,6 +21,7 @@
 #pragma once
 
 #include "platform/linux/input/LibInputHandler.h"
+#include "platform/linux/OptionalsReg.h"
 #include "rendering/gles/RenderSystemGLES.h"
 #include "threads/CriticalSection.h"
 #include "windowing/WinSystem.h"
@@ -64,6 +65,6 @@ class CWinSystemAmlogic : public CWinSystemBase
 
   CCriticalSection m_resourceSection;
   std::vector<IDispResource*> m_resources;
-
+  std::unique_ptr<OPTIONALS::CLircContainer, OPTIONALS::delete_CLircContainer> m_lirc;
   std::unique_ptr<CLibInputHandler> m_libinput;
 };
