From 5bfd75e6ff533e0d10b979cc2ebf8a5db379a0bf Mon Sep 17 00:00:00 2001
From: Rechi <Rechi@users.noreply.github.com>
Date: Tue, 19 Jun 2018 14:00:00 +0200
Subject: [PATCH] [depends] use MAKE variable instead of make command

fixes building binary addons on FreeBSD, by using gmake for getting supported_addons too
---
 tools/depends/target/libssh/Makefile    | 4 ++--
 tools/depends/target/rapidjson/Makefile | 6 +++---
 tools/depends/xbmc-addons.include       | 4 ++--
 3 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/tools/depends/target/libssh/Makefile b/tools/depends/target/libssh/Makefile
index 819f208e0e92..405bd210df67 100644
--- a/tools/depends/target/libssh/Makefile
+++ b/tools/depends/target/libssh/Makefile
@@ -38,10 +38,10 @@ endif
 	cd $(PLATFORM)/build; $(CMAKE) -DWITH_STATIC_LIB=1 -DWITH_EXAMPLES=0 -DTHREADS_PTHREAD_ARG=0 $(CMAKE_EXTRAFLAGS) -DWITH_GSSAPI=0 VERBOSE=1 ..
 
 $(LIBDYLIB): $(PLATFORM)
-	make -j 1 -C $(PLATFORM)/build
+	$(MAKE) -j 1 -C $(PLATFORM)/build
 
 .installed-$(PLATFORM): $(LIBDYLIB)
-	make -C $(PLATFORM)/build install
+	$(MAKE) -C $(PLATFORM)/build install
 	rm -f $(PREFIX)/lib/libssh.so $(PREFIX)/lib/libssh.so.4.3.0 $(PREFIX)/lib/libssh.so.4
 	rm -f $(PREFIX)/lib/libssh.*dylib*
 	rm -f $(PREFIX)/lib/libssh_threads.*dylib*
diff --git a/tools/depends/target/rapidjson/Makefile b/tools/depends/target/rapidjson/Makefile
index 1ce1f77b88f2..b54af9190c16 100644
--- a/tools/depends/target/rapidjson/Makefile
+++ b/tools/depends/target/rapidjson/Makefile
@@ -36,7 +36,7 @@ $(TARBALLS_LOCATION)/$(ARCHIVE):
 $(PLATFORM): $(TARBALLS_LOCATION)/$(ARCHIVE) $(DEPS)
 ifeq ($(PREFIX),)
 	@echo
-	@echo "ERROR: please set PREFIX to the kodi install path e.g. make PREFIX=/usr/local"
+	@echo "ERROR: please set PREFIX to the kodi install path e.g. $(MAKE) PREFIX=/usr/local"
 	@exit 1
 endif
 	rm -rf $(PLATFORM); mkdir -p $(PLATFORM)
@@ -46,8 +46,8 @@ endif
 	cd $(PLATFORM)/build; $(CMAKE) $(CMAKE_OPTIONS) ..
 
 .installed-$(PLATFORM): $(PLATFORM)
-	make -C $(PLATFORM)/build
-	make -C $(PLATFORM)/build install
+	$(MAKE) -C $(PLATFORM)/build
+	$(MAKE) -C $(PLATFORM)/build install
 	rm -rf $(PREFIX)/share/doc/RapidJSON
 	touch $@
 
diff --git a/tools/depends/xbmc-addons.include b/tools/depends/xbmc-addons.include
index e07da9b8f99e..63046be4f35d 100644
--- a/tools/depends/xbmc-addons.include
+++ b/tools/depends/xbmc-addons.include
@@ -55,7 +55,7 @@ distclean:
 	mkdir -p $(PLATFORM)
 ifeq ($(PREFIX),)
 	@echo
-	@echo "ERROR: please set PREFIX to the xbmc install path e.g. make PREFIX=/usr/local"
+	@echo "ERROR: please set PREFIX to the xbmc install path e.g. $(MAKE) PREFIX=/usr/local"
 	@exit 1
 endif
 ifeq ($(CROSS_COMPILING),yes)
@@ -66,7 +66,7 @@ endif
          $(CMAKE) -DCMAKE_INSTALL_PREFIX=$(INSTALL_PREFIX) $(CMAKE_EXTRA) \
          $(TOOLCHAIN) $(SRC_OVERRIDE) \
          -DADDONS_TO_BUILD="$(ADDONS)" $(ADDON_PROJECT_DIR) -DBUILD_DIR=$(BUILDDIR)/$(PLATFORM)/build ;\
-         for addon in $$(make supported_addons | awk '/^ALL_ADDONS_BUILDING: .*$$/ { first = $$1; $$1 = ""; print $$0 }'); do \
+         for addon in $$($(MAKE) supported_addons | awk '/^ALL_ADDONS_BUILDING: .*$$/ { first = $$1; $$1 = ""; print $$0 }'); do \
            $(MAKE) $$addon && echo $$addon >> $(ADDON_PROJECT_DIR)/.success || echo $$addon >> $(ADDON_PROJECT_DIR)/.failure ;\
          done
 ifneq ($(CROSS_COMPILING),yes)
