From 40063515bf2081565bf7fe2054033dae4ca1ef31 Mon Sep 17 00:00:00 2001
From: Roman Artiukhin <bahusdrive@gmail.com>
Date: Sun, 26 Apr 2020 11:33:39 +0300
Subject: [PATCH] Fix watching icons are not shown when content type is not set

---
 addons/skin.estouchy/xml/ViewsList.xml      | 12 ++--
 addons/skin.estouchy/xml/ViewsThumbnail.xml | 73 +++++++++++++++++++++
 2 files changed, 79 insertions(+), 6 deletions(-)

diff --git a/addons/skin.estouchy/xml/ViewsList.xml b/addons/skin.estouchy/xml/ViewsList.xml
index e0c32771b40d..fbeedd24da6b 100644
--- a/addons/skin.estouchy/xml/ViewsList.xml
+++ b/addons/skin.estouchy/xml/ViewsList.xml
@@ -113,7 +113,7 @@
 					<width>60</width>
 					<height>40</height>
 					<texture>flagging/source/Set.png</texture>
-					<visible>[Container.Content(Movies) | Container.Content(Sets)] + ListItem.IsCollection</visible>
+					<visible>ListItem.IsCollection</visible>
 				</control>
 				<control type="image">
 					<posx>48r</posx>
@@ -122,7 +122,7 @@
 					<height>26</height>
 					<aspectratio>keep</aspectratio>
 					<texture>OverlayWatching.png</texture>
-					<visible>[Container.Content(Movies) | Container.Content(Episodes) | Container.Content(MusicVideos) | Container.Content(Videos)] + ListItem.IsResumable</visible>
+					<visible>ListItem.IsResumable</visible>
 				</control>
 				<control type="image">
 					<posx>50r</posx>
@@ -130,7 +130,7 @@
 					<width>30</width>
 					<height>30</height>
 					<texture>$INFO[ListItem.Overlay]</texture>
-					<visible>[Container.Content(Movies) | Container.Content(TVShows) | Container.Content(Seasons) | Container.Content(Episodes) | Container.Content(MusicVideos) | Container.Content(Videos)] + !ListItem.IsResumable</visible>
+					<visible>!ListItem.IsResumable</visible>
 				</control>
 				<control type="label">
 					<posx>$PARAM[label2-posx]</posx>
@@ -255,7 +255,7 @@
 					<width>60</width>
 					<height>40</height>
 					<texture>flagging/source/Set.png</texture>
-					<visible>[Container.Content(Movies) | Container.Content(Sets)] + ListItem.IsCollection</visible>
+					<visible>ListItem.IsCollection</visible>
 				</control>
 				<control type="image">
 					<posx>48r</posx>
@@ -264,7 +264,7 @@
 					<height>26</height>
 					<aspectratio>keep</aspectratio>
 					<texture>OverlayWatching.png</texture>
-					<visible>[Container.Content(Movies) | Container.Content(Episodes) | Container.Content(MusicVideos) | Container.Content(Videos)] + ListItem.IsResumable</visible>
+					<visible>ListItem.IsResumable</visible>
 				</control>
 				<control type="image">
 					<posx>50r</posx>
@@ -272,7 +272,7 @@
 					<width>30</width>
 					<height>30</height>
 					<texture>$INFO[ListItem.Overlay]</texture>
-					<visible>[Container.Content(Movies) | Container.Content(TVShows) | Container.Content(Seasons) | Container.Content(Episodes) | Container.Content(MusicVideos) | Container.Content(Videos)] + !ListItem.IsResumable</visible>
+					<visible>!ListItem.IsResumable</visible>
 				</control>
 				<control type="label">
 					<posx>$PARAM[label2-posx]</posx>
diff --git a/addons/skin.estouchy/xml/ViewsThumbnail.xml b/addons/skin.estouchy/xml/ViewsThumbnail.xml
index a3e4dade5a0c..99a40208d45d 100644
--- a/addons/skin.estouchy/xml/ViewsThumbnail.xml
+++ b/addons/skin.estouchy/xml/ViewsThumbnail.xml
@@ -72,6 +72,22 @@
 					<texture>OverlayWatched.png</texture>
 					<visible>Window.IsVisible(AddonBrowser) + String.IsEqual(ListItem.Label2,$LOCALIZE[305])</visible>
 				</control>
+				<control type="image">
+					<posx>182</posx>
+					<posy>4</posy>
+					<width>26</width>
+					<height>26</height>
+					<aspectratio>keep</aspectratio>
+					<texture>OverlayWatching.png</texture>
+					<visible>ListItem.IsResumable</visible>
+				</control>
+				<control type="image">
+					<posx>180</posx>
+					<posy>2</posy>
+					<width>30</width>
+					<height>30</height>
+					<texture>$INFO[ListItem.Overlay]</texture>
+				</control>
 			</itemlayout>
 			<focusedlayout condition="!Container.Content(Movies) + !Container.Content(Seasons) + !Container.Content(Episodes) + !Container.Content(TVShows) + !Container.Content(MusicVideos) + !Container.Content(Videos)" height="250" width="218">
 				<control type="image">
@@ -128,6 +144,23 @@
 					<texture>OverlayWatched.png</texture>
 					<visible>Window.IsVisible(AddonBrowser) + String.IsEqual(ListItem.Label2,$LOCALIZE[305])</visible>
 				</control>
+				<control type="image">
+					<posx>182</posx>
+					<posy>4</posy>
+					<width>26</width>
+					<height>26</height>
+					<aspectratio>keep</aspectratio>
+					<texture>OverlayWatching.png</texture>
+					<visible>ListItem.IsResumable</visible>
+				</control>
+				<control type="image">
+					<posx>180</posx>
+					<posy>2</posy>
+					<width>30</width>
+					<height>30</height>
+					<texture>$INFO[ListItem.Overlay]</texture>
+					<visible>!ListItem.IsResumable</visible>
+				</control>
 			</focusedlayout>
 			<itemlayout condition="Container.Content(Movies) | Container.Content(Seasons) | Container.Content(TVShows)" height="375" width="218">
 				<control type="image">
@@ -180,12 +213,22 @@
 					<texture>flagging/source/Set.png</texture>
 					<visible>ListItem.IsCollection</visible>
 				</control>
+				<control type="image">
+					<posx>172</posx>
+					<posy>262</posy>
+					<width>26</width>
+					<height>26</height>
+					<aspectratio>keep</aspectratio>
+					<texture>OverlayWatching.png</texture>
+					<visible>ListItem.IsResumable</visible>
+				</control>
 				<control type="image">
 					<posx>170</posx>
 					<posy>260</posy>
 					<width>30</width>
 					<height>30</height>
 					<texture>$INFO[ListItem.Overlay]</texture>
+					<visible>!ListItem.IsResumable</visible>
 				</control>
 			</itemlayout>
 			<focusedlayout condition="Container.Content(Movies) | Container.Content(Seasons) | Container.Content(TVShows)" height="375" width="218">
@@ -239,12 +282,22 @@
 					<texture>flagging/source/Set.png</texture>
 					<visible>ListItem.IsCollection</visible>
 				</control>
+				<control type="image">
+					<posx>172</posx>
+					<posy>262</posy>
+					<width>26</width>
+					<height>26</height>
+					<aspectratio>keep</aspectratio>
+					<texture>OverlayWatching.png</texture>
+					<visible>ListItem.IsResumable</visible>
+				</control>
 				<control type="image">
 					<posx>170</posx>
 					<posy>260</posy>
 					<width>30</width>
 					<height>30</height>
 					<texture>$INFO[ListItem.Overlay]</texture>
+					<visible>!ListItem.IsResumable</visible>
 				</control>
 			</focusedlayout>
 			<itemlayout condition="Container.Content(Episodes) | Container.Content(MusicVideos) | Container.Content(Videos)" height="250" width="$PARAM[layout-width]">
@@ -290,12 +343,22 @@
 					<height>30</height>
 					<texture>$INFO[ListItem.VideoResolution,flagging/resolution/,.png]</texture>
 				</control>
+				<control type="image">
+					<posx>265</posx>
+					<posy>147</posy>
+					<width>26</width>
+					<height>26</height>
+					<aspectratio>keep</aspectratio>
+					<texture>OverlayWatching.png</texture>
+					<visible>ListItem.IsResumable</visible>
+				</control>
 				<control type="image">
 					<posx>263</posx>
 					<posy>145</posy>
 					<width>30</width>
 					<height>30</height>
 					<texture>$INFO[ListItem.Overlay]</texture>
+					<visible>!ListItem.IsResumable</visible>
 				</control>
 			</itemlayout>
 			<focusedlayout condition="Container.Content(Episodes) | Container.Content(MusicVideos) | Container.Content(Videos)" height="250" width="$PARAM[layout-width]">
@@ -341,12 +404,22 @@
 					<height>30</height>
 					<texture>$INFO[ListItem.VideoResolution,flagging/resolution/,.png]</texture>
 				</control>
+				<control type="image">
+					<posx>265</posx>
+					<posy>147</posy>
+					<width>26</width>
+					<height>26</height>
+					<aspectratio>keep</aspectratio>
+					<texture>OverlayWatching.png</texture>
+					<visible>ListItem.IsResumable</visible>
+				</control>
 				<control type="image">
 					<posx>263</posx>
 					<posy>145</posy>
 					<width>30</width>
 					<height>30</height>
 					<texture>$INFO[ListItem.Overlay]</texture>
+					<visible>!ListItem.IsResumable</visible>
 				</control>
 			</focusedlayout>
 		</control>
