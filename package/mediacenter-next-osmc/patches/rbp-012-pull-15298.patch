From 71d2c11f0b7999f8b007a6f2ef102e285cc883d3 Mon Sep 17 00:00:00 2001
From: enen92 <92enen@gmail.com>
Date: Sun, 20 Jan 2019 12:10:30 +0000
Subject: [PATCH 1/2] [guilib] GUISliderControl - avoid scalling base textures
 if dimensions are zero

---
 xbmc/guilib/GUISliderControl.cpp | 22 ++++++++++++----------
 1 file changed, 12 insertions(+), 10 deletions(-)

diff --git a/xbmc/guilib/GUISliderControl.cpp b/xbmc/guilib/GUISliderControl.cpp
index 5c4198fd3350..fec4e847122f 100644
--- a/xbmc/guilib/GUISliderControl.cpp
+++ b/xbmc/guilib/GUISliderControl.cpp
@@ -69,26 +69,28 @@ void CGUISliderControl::Process(unsigned int currentTime, CDirtyRegionList &dirt
       SetIntValue(val);
   }
 
-
   dirty |= m_guiBackground.SetHeight(m_height);
   dirty |= m_guiBackground.SetWidth(m_width);
   dirty |= m_guiBackground.Process(currentTime);
 
   CGUITexture &nibLower = (IsActive() && m_bHasFocus && !IsDisabled() && m_currentSelector == RangeSelectorLower) ? m_guiSelectorLowerFocus : m_guiSelectorLower;
-  float fScale;
-  if (m_orientation == HORIZONTAL)
-    fScale = m_height == 0 ? 1.0f : m_height / m_guiBackground.GetTextureHeight();
-  else
-    fScale = m_width == 0 ? 1.0f : m_width / nibLower.GetTextureWidth();
 
+  float fScale = 1.0f;
+
+  if (m_orientation == HORIZONTAL && m_guiBackground.GetTextureHeight() != 0)
+    fScale = m_height / m_guiBackground.GetTextureHeight();
+  else if (m_width != 0 && nibLower.GetTextureWidth() != 0)
+    fScale = m_width / nibLower.GetTextureWidth();
   dirty |= ProcessSelector(nibLower, currentTime, fScale, RangeSelectorLower);
   if (m_rangeSelection)
   {
     CGUITexture &nibUpper = (IsActive() && m_bHasFocus && !IsDisabled() && m_currentSelector == RangeSelectorUpper) ? m_guiSelectorUpperFocus : m_guiSelectorUpper;
-    if (m_orientation == HORIZONTAL)
-      fScale = m_height == 0 ? 1.0f : m_height / m_guiBackground.GetTextureHeight();
-    else
-      fScale = m_width == 0 ? 1.0f : m_width / nibUpper.GetTextureWidth();
+
+    if (m_orientation == HORIZONTAL && m_guiBackground.GetTextureHeight() != 0)
+      fScale = m_height / m_guiBackground.GetTextureHeight();
+    else if (m_width != 0 && nibUpper.GetTextureWidth() != 0)
+      fScale = m_width / nibUpper.GetTextureWidth();
+
     dirty |= ProcessSelector(nibUpper, currentTime, fScale, RangeSelectorUpper);
   }
 

From 143dc946611a53a0c23270a17154a97e88773331 Mon Sep 17 00:00:00 2001
From: enen92 <92enen@gmail.com>
Date: Sun, 20 Jan 2019 12:35:01 +0000
Subject: [PATCH 2/2] [Estuary] Improve VolumeSlider Dialog

---
 .../xml/Custom_1103_VolumeSlider.xml             | 16 +++++++++++-----
 1 file changed, 11 insertions(+), 5 deletions(-)

diff --git a/addons/skin.estuary/xml/Custom_1103_VolumeSlider.xml b/addons/skin.estuary/xml/Custom_1103_VolumeSlider.xml
index 04c55bd42c7c..9805c91c0561 100644
--- a/addons/skin.estuary/xml/Custom_1103_VolumeSlider.xml
+++ b/addons/skin.estuary/xml/Custom_1103_VolumeSlider.xml
@@ -44,27 +44,33 @@
 				<height>40</height>
 				<texturesliderbar></texturesliderbar>
 				<textureslidernib></textureslidernib>
-				<textureslidernibfocus colordiffuse="button_focus">colors/white.png</textureslidernibfocus>
+				<textureslidernibfocus></textureslidernibfocus>
 				<info>Player.Volume</info>
 				<action>Volume</action>
 			</control>
-			<control type="image">
+			<control type="button">
 				<left>0</left>
 				<top>65</top>
 				<width>28</width>
 				<height>28</height>
-				<texture flipx="true" colordiffuse="button_focus">overlays/arrowright.png</texture>
+				<texturefocus flipx="true" colordiffuse="button_focus">overlays/arrowright.png</texturefocus>
+				<texturenofocus flipx="true" colordiffuse="button_focus">overlays/arrowright.png</texturenofocus>
 				<animation effect="zoom" start="0,100" end="100,100" delay="500" center="auto" time="200">WindowOpen</animation>
 				<animation effect="zoom" start="100,100" end="0,100" center="auto" time="200">WindowClose</animation>
+				<hitrect x="-20" y="20" w="60" h="112" />
+				<onclick>Action(VolumeDown)</onclick>
 			</control>
-			<control type="image">
+			<control type="button">
 				<left>455</left>
 				<top>65</top>
 				<width>28</width>
 				<height>28</height>
-				<texture colordiffuse="button_focus">overlays/arrowright.png</texture>
+				<texturefocus colordiffuse="button_focus">overlays/arrowright.png</texturefocus>
+				<texturenofocus colordiffuse="button_focus">overlays/arrowright.png</texturenofocus>
 				<animation effect="zoom" start="0,100" end="100,100" delay="500" center="auto" time="200">WindowOpen</animation>
 				<animation effect="zoom" start="100,100" end="0,100" center="auto" time="200">WindowClose</animation>
+				<hitrect x="440" y="20" w="60" h="112" />
+				<onclick>Action(VolumeUp)</onclick>
 			</control>
 		</control>
 	</controls>
