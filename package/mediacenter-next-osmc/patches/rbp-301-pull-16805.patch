From 38b1450efdc1799efba00348b95cc07bc20a369a Mon Sep 17 00:00:00 2001
From: DaveTBlake <oak99sky@yahoo.co.uk>
Date: Sat, 19 Oct 2019 09:41:39 +0100
Subject: [PATCH] Build disc cache file name consistently using item path
 without options string

---
 xbmc/FileItem.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/xbmc/FileItem.cpp b/xbmc/FileItem.cpp
index 6cb6d460ef21..e4f04ccb9cd2 100644
--- a/xbmc/FileItem.cpp
+++ b/xbmc/FileItem.cpp
@@ -2946,7 +2946,7 @@ void CFileItemList::RemoveDiscCache(int windowID) const
 std::string CFileItemList::GetDiscFileCache(int windowID) const
 {
   std::string strPath(GetPath());
-  URIUtils::RemoveSlashAtEnd(strPath);
+  strPath = CURL(strPath).GetWithoutOptions();
 
   uint32_t crc = Crc32::ComputeFromLowerCase(strPath);
 
