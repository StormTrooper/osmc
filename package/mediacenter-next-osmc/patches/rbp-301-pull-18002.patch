From ac79a667aa69b6459b6a795fdfc714f45bad16c4 Mon Sep 17 00:00:00 2001
From: phunkyfish <phunkyfish@gmail.com>
Date: Thu, 4 Jun 2020 19:53:02 +0100
Subject: [PATCH 1/2] [inputstream] remove inputstreamaddon and
 inputstreamclass as identifiers for inputstream addons

---
 .../DVDInputStreams/DVDFactoryInputStream.cpp          |  5 -----
 .../VideoPlayer/DVDInputStreams/InputStreamAddon.cpp   | 10 ----------
 2 files changed, 15 deletions(-)

diff --git a/xbmc/cores/VideoPlayer/DVDInputStreams/DVDFactoryInputStream.cpp b/xbmc/cores/VideoPlayer/DVDInputStreams/DVDFactoryInputStream.cpp
index 3a373d4a2be6..d0dcb96316fc 100644
--- a/xbmc/cores/VideoPlayer/DVDInputStreams/DVDFactoryInputStream.cpp
+++ b/xbmc/cores/VideoPlayer/DVDInputStreams/DVDFactoryInputStream.cpp
@@ -63,11 +63,6 @@ std::shared_ptr<CDVDInputStream> CDVDFactoryInputStream::CreateInputStream(IVide
       STREAM_PROPERTY_VALUE_INPUTSTREAMFFMPEG)
     return std::shared_ptr<CDVDInputStreamFFmpeg>(new CDVDInputStreamFFmpeg(fileitem));
 
-  // TODO; Retire for the above instead prior to Matrix release
-  if (fileitem.GetProperty("inputstreamclass").asString() ==
-      STREAM_PROPERTY_VALUE_INPUTSTREAMFFMPEG)
-    return std::shared_ptr<CDVDInputStreamFFmpeg>(new CDVDInputStreamFFmpeg(fileitem));
-
   if (fileitem.IsDiscImage())
   {
 #ifdef HAVE_LIBBLURAY
diff --git a/xbmc/cores/VideoPlayer/DVDInputStreams/InputStreamAddon.cpp b/xbmc/cores/VideoPlayer/DVDInputStreams/InputStreamAddon.cpp
index b571bab7cf00..474f1206c278 100644
--- a/xbmc/cores/VideoPlayer/DVDInputStreams/InputStreamAddon.cpp
+++ b/xbmc/cores/VideoPlayer/DVDInputStreams/InputStreamAddon.cpp
@@ -73,16 +73,6 @@ bool CInputStreamAddon::Supports(BinaryAddonBasePtr& addonBase, const CFileItem
   if (!addon.isNull())
     return (addon.asString() == addonBase->ID());
 
-  // TODO: to be deprecated for the above prior to Matrix release - all addons must change
-  addon = fileitem.GetProperty("inputstreamclass");
-  if (!addon.isNull())
-    return (addon.asString() == addonBase->ID());
-
-  // TODO: to be deprecated for the above prior to Matrix release - all addons must change
-  addon = fileitem.GetProperty("inputstreamaddon");
-  if (!addon.isNull())
-    return (addon.asString() == addonBase->ID());
-
   // check protocols
   std::string protocol = CURL(fileitem.GetDynPath()).GetProtocol();
   if (!protocol.empty())

From fdbd699ae25c7449873461676da55c23b2e629a9 Mon Sep 17 00:00:00 2001
From: phunkyfish <phunkyfish@gmail.com>
Date: Thu, 4 Jun 2020 19:53:54 +0100
Subject: [PATCH 2/2] [inputstream] cleanup extra whitespace

---
 .../VideoPlayer/DVDInputStreams/DVDFactoryInputStream.cpp     | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/xbmc/cores/VideoPlayer/DVDInputStreams/DVDFactoryInputStream.cpp b/xbmc/cores/VideoPlayer/DVDInputStreams/DVDFactoryInputStream.cpp
index d0dcb96316fc..4bfc5230cb33 100644
--- a/xbmc/cores/VideoPlayer/DVDInputStreams/DVDFactoryInputStream.cpp
+++ b/xbmc/cores/VideoPlayer/DVDInputStreams/DVDFactoryInputStream.cpp
@@ -100,8 +100,8 @@ std::shared_ptr<CDVDInputStream> CDVDFactoryInputStream::CreateInputStream(IVide
   else if (URIUtils::IsPVRRecording(file))
     return std::shared_ptr<CInputStreamPVRRecording>(new CInputStreamPVRRecording(pPlayer, fileitem));
 #ifdef HAVE_LIBBLURAY
-  else if (fileitem.IsType(".bdmv") || fileitem.IsType(".mpls") 
-          || fileitem.IsType(".bdm") || fileitem.IsType(".mpl") 
+  else if (fileitem.IsType(".bdmv") || fileitem.IsType(".mpls")
+          || fileitem.IsType(".bdm") || fileitem.IsType(".mpl")
           || StringUtils::StartsWithNoCase(file, "bluray:"))
     return std::shared_ptr<CDVDInputStreamBluray>(new CDVDInputStreamBluray(pPlayer, fileitem));
 #endif
