From e5bc38869fdd1c73439f388f80aa892650913fa8 Mon Sep 17 00:00:00 2001
From: Unknown <gelotus@gmail.com>
Date: Sat, 21 Apr 2018 20:18:21 +0200
Subject: [PATCH] [AML]Register Lirc after #13761

---
 xbmc/windowing/amlogic/WinSystemAmlogic.cpp | 3 +++
 xbmc/windowing/amlogic/WinSystemAmlogic.h   | 2 ++
 2 files changed, 5 insertions(+)

diff --git a/xbmc/windowing/amlogic/WinSystemAmlogic.cpp b/xbmc/windowing/amlogic/WinSystemAmlogic.cpp
index 1db2ba77c653..fe5f9609110f 100644
--- a/xbmc/windowing/amlogic/WinSystemAmlogic.cpp
+++ b/xbmc/windowing/amlogic/WinSystemAmlogic.cpp
@@ -101,6 +101,9 @@ bool CWinSystemAmlogic::InitWindowSystem()
   CRendererAML::Register();
 
   aml_set_framebuffer_resolution(1920, 1080, m_framebuffer_name);
+  
+  m_lirc.reset(OPTIONALS::LircRegister()); 
+  CLog::Log(LOGDEBUG, "OPTIONALS::LircRegister -- register Lirc client"); 
 
   return CWinSystemBase::InitWindowSystem();
 }
diff --git a/xbmc/windowing/amlogic/WinSystemAmlogic.h b/xbmc/windowing/amlogic/WinSystemAmlogic.h
index cfe53d71075e..e813926270c0 100644
--- a/xbmc/windowing/amlogic/WinSystemAmlogic.h
+++ b/xbmc/windowing/amlogic/WinSystemAmlogic.h
@@ -20,6 +20,7 @@
 
 #pragma once
 
+#include "platform/linux/OptionalsReg.h"
 #include "rendering/gles/RenderSystemGLES.h"
 #include "threads/CriticalSection.h"
 #include "windowing/WinSystem.h"
@@ -63,4 +64,5 @@ class CWinSystemAmlogic : public CWinSystemBase
 
   CCriticalSection m_resourceSection;
   std::vector<IDispResource*> m_resources;
+  std::unique_ptr<OPTIONALS::CLircContainer, OPTIONALS::delete_CLircContainer> m_lirc;
 };
